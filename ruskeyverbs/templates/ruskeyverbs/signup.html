{% extends "ruskeyverbs/message.html" %}
{% block message_content %}
  <h2>Sign up</h2>
  <div id='istaken'>
    <form method="post">
      {% csrf_token %}

        {% for field in form %}
        <p>
          {{ field.label_tag }}<br>

          {{ field }}
          {% if field == form.username %}
          extra
          {% endif %}
          {% if field.help_text %}
            <small style="display: none">{{ field.help_text }}</small>
          {% endif %}
          {% for error in field.errors %}
            <p style="color: red">{{ error }}</p>
          {% endfor %}
        </p>
        {% endfor %}
      <button type="submit">Sign up</button>

    </form>
  </div>
  <script>
  var test = axios.get("{% url 'get-user' 'eli' %}")
  console.log(test)
  var vm = new Vue({
    delimiters: ['[[', ']]'],
    el: '#istaken',
    data: {
      name: ''
    },
    methods: {
      TestForUser: function() {
        axios.get("/userapi/"+this.name)
        .then(function(response) {
          if (response.data['username'] == vm.name) {
              console.log('bad')
            }
          })
        }
      }
    })
  </script>
{% endblock %}
