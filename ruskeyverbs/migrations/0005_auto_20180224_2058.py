# Generated by Django 2.0.2 on 2018-02-25 02:58

from django.db import migrations
from django.utils import timezone
import random
import datetime


def populate_user(apps, schema_editor):
    example_model = apps.get_model("ruskeyverbs", "Example")
    user_model = apps.get_model("auth", "User")
    performance_model = apps.get_model("ruskeyverbs", "PerformancePerExample")
    user = user_model.objects.get(pk=1)
    dictkey = 0
    object_dict = {}
    for example in example_model.objects.all().count():
        random_int = random.randint(1, 10)
        random_int_days = random.randint(1, 5)
        study_date = timezone.now() - datetime.timedelta(days=random_int_days)
        due_date = study_date + datetime.timedelta(days=random_int)
        object_dict[dictkey] = performance_model(example,
                                                 user,
                                                 2.5,
                                                 random_int,
                                                 study_date,
                                                 due_date)
        object_dict[dictkey].save()
        dictkey += 1


class Migration(migrations.Migration):

    dependencies = [
        ('ruskeyverbs', '0003_auto_20180224_1939'),
    ]

    operations = [
        migrations.RunPython(populate_user),
    ]
